<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Introducing the 'biglda'-package • biglda</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.3.1/jquery.min.js" integrity="sha256-FgpCb/KJQlLNfOu91ta32o/NMZxltwRo8QtmkMRdAu8=" crossorigin="anonymous"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/css/bootstrap.min.css" integrity="sha256-916EbMg70RQy9LHiGkXzG8hSg9EdNy97GazNG/aiY1w=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.3.7/js/bootstrap.min.js" integrity="sha256-U5ZEeKfGNOja007MMD3YBI0A3OSZOQbeG6z2f2Y0hu8=" crossorigin="anonymous"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/all.min.css" integrity="sha256-nAmazAk6vS34Xqo0BSrTb+abbtFlgsFK7NKSi6o7Y78=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.7.1/css/v4-shims.min.css" integrity="sha256-6qHlizsOWFskGlwVOKuns+D1nB6ssZrHQrNj1wGplHc=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.4/clipboard.min.js" integrity="sha256-FiZwavyI2V6+EXO1U+xzLG3IKldpiTFf3153ea9zikQ=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/headroom.min.js" integrity="sha256-DJFC1kqIhelURkuza0AvYal5RxMtpzLjFhsnVIeuk+U=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.9.4/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="Introducing the 'biglda'-package">
<meta property="og:description" content="">
<meta name="twitter:card" content="summary">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">biglda</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="Released version">0.0.0.9001</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../index.html">
    <span class="fas fa fas fa-home fa-lg"></span>
     
  </a>
</li>
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" aria-expanded="false">
    Articles
     
    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/vignette.html">Introducing the 'biglda'-package</a>
    </li>
  </ul>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right"></ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->

      

      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1>Introducing the ‘biglda’-package</h1>
                        <h4 class="author">Andreas Blätte (<a href="mailto:andreas.blaette@uni-due.de">andreas.blaette@uni-due.de</a>)</h4>
            
            <h4 class="date">2020-03-14</h4>
      
      
      <div class="hidden name"><code>vignette.Rmd</code></div>

    </div>

    
    
<div id="why" class="section level2">
<h2 class="hasAnchor">
<a href="#why" class="anchor"></a>Why</h2>
<p>The purpose of the biglda package is to expose the fast parallelized topic model computation of the mallet package to handle big corpora efficiently. At this stage, this vignette includes only a minimal example to convey the fundamental workflow.</p>
</div>
<div id="installation" class="section level2">
<h2 class="hasAnchor">
<a href="#installation" class="anchor"></a>Installation</h2>
<p>The <em>biglda</em> package is a GitHub only package at this stage. You can install is from the GitHub site of the PolMine Project</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" data-line-number="1">devtools<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/devtools/man/remote-reexports.html">install_github</a></span>(<span class="st">"PolMine/biglda"</span>)</a></code></pre></div>
</div>
<div id="getting-started" class="section level2">
<h2 class="hasAnchor">
<a href="#getting-started" class="anchor"></a>Getting started</h2>
<p>Computing a topic model may require a lot of memory. It is necessary to define the memory available for the Java Virtual Machine (JVM) that will be used to interface to Java <em>before</em> the JVM is started. As the <em>biglda</em> package will initialize a JVM upon being loaded, the respective parameter needs to be set before we load <em>biglda</em>.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/options.html">options</a></span>(<span class="dt">java.parameters =</span> <span class="st">"-Xmx4g"</span>)</a>
<a class="sourceLine" id="cb2-2" data-line-number="2"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(biglda)</a></code></pre></div>
<p>The mallet Java package is not shipped with the R package biglda, to keep size of the R package minimal, and to avoid a complicated situation of licenses. Load the mallet Java package if it is not yet installed.</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb3-1" data-line-number="1"><span class="cf">if</span> (<span class="op">!</span><span class="kw"><a href="../reference/mallet_utils.html">mallet_is_installed</a></span>()) <span class="kw"><a href="../reference/mallet_utils.html">mallet_install</a></span>()</a></code></pre></div>
<p>To check the installation, get the version of mallet.</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb4-1" data-line-number="1"><span class="kw"><a href="../reference/mallet_utils.html">mallet_get_version</a></span>()</a></code></pre></div>
<pre><code>## [1] '2.0.8'</code></pre>
</div>
<div id="sample-workflow" class="section level2">
<h2 class="hasAnchor">
<a href="#sample-workflow" class="anchor"></a>Sample Workflow</h2>
<p>The biglda package works seamlessly with the polmineR package. In our example, we compute a topic model for the speeches in the GERMAPARLMINI sample corpus which is included in the polmineR package.</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb6-1" data-line-number="1"><span class="kw"><a href="https://rdrr.io/r/base/library.html">library</a></span>(polmineR)</a>
<a class="sourceLine" id="cb6-2" data-line-number="2">speeches &lt;-<span class="st"> </span>polmineR<span class="op">::</span><span class="kw"><a href="https://rdrr.io/pkg/polmineR/man/as.speeches.html">as.speeches</a></span>(<span class="st">"GERMAPARLMINI"</span>, <span class="dt">s_attribute_name =</span> <span class="st">"speaker"</span>)</a></code></pre></div>
<p>Before training the topic model, mallet requires that the input data are converted into the mallet input format, an InstanceList.</p>
<div class="sourceCode" id="cb7"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb7-1" data-line-number="1">instance_list &lt;-<span class="st"> </span><span class="kw"><a href="../reference/as.instance_list.html">as.instance_list</a></span>(speeches)</a></code></pre></div>
<pre><code>## ... create alphabet</code></pre>
<pre><code>## ... instantiate pipe</code></pre>
<pre><code>## ... decode token stream</code></pre>
<pre><code>## ... creating vector of document ids</code></pre>
<pre><code>## ... creating vector of corpus positions</code></pre>
<pre><code>## ... decoding character vectors</code></pre>
<pre><code>## ... generating list of character vectors</code></pre>
<pre><code>## ... created instances</code></pre>
<p>We now instantiate the ParallelTopicModel class.</p>
<div class="sourceCode" id="cb16"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb16-1" data-line-number="1">lda &lt;-<span class="st"> </span><span class="kw"><a href="../reference/paralleltopicmodel.html">ParallelTopicModel</a></span>(<span class="dt">n_topics =</span> 25L, <span class="dt">alpha_sum =</span> <span class="fl">5.1</span>, <span class="dt">beta =</span> <span class="fl">0.1</span>)</a></code></pre></div>
<p>The methods for this class are not defined by the biglda package and are not documented therein, but on the documentation of the mallet api.</p>
<p>The first next step is to feed the data to be modelled, i.e. the instance_list into the class.</p>
<div class="sourceCode" id="cb17"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb17-1" data-line-number="1">lda<span class="op">$</span><span class="kw">addInstances</span>(instance_list)</a></code></pre></div>
<p>Then we set a few additional parameters. Note that this is the occasio when you can set the number of threads to be used.</p>
<div class="sourceCode" id="cb18"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb18-1" data-line-number="1">lda<span class="op">$</span><span class="kw">setNumThreads</span>(1L)</a>
<a class="sourceLine" id="cb18-2" data-line-number="2">lda<span class="op">$</span><span class="kw">setTopicDisplay</span>(50L, 10L)</a>
<a class="sourceLine" id="cb18-3" data-line-number="3">lda<span class="op">$</span><span class="kw">setNumIterations</span>(150L)</a></code></pre></div>
<p>Use the estimate method to trigger the training of the topic model.</p>
<div class="sourceCode" id="cb19"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb19-1" data-line-number="1">lda<span class="op">$</span><span class="kw">estimate</span>()</a></code></pre></div>
<p>There is a great bandwith of tools available for the LDA topicmodels trained using the topicmoddels package. To be able to use it, use the <code><a href="../reference/mapping.html">as_LDA()</a></code> function for type conversion.</p>
<div class="sourceCode" id="cb20"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb20-1" data-line-number="1">topicmodels_lda &lt;-<span class="st"> </span><span class="kw"><a href="../reference/mapping.html">as_LDA</a></span>(lda)</a></code></pre></div>
<pre><code>## ... getting number of documents and number of terms</code></pre>
<pre><code>## ... getting alphabet</code></pre>
<pre><code>## ... getting document names</code></pre>
<pre><code>## ... getting topic probabilities (gamma matrix)</code></pre>
<pre><code>## ... getting topic word weights (beta matrix)</code></pre>
</div>
<div id="perspectives" class="section level2">
<h2 class="hasAnchor">
<a href="#perspectives" class="anchor"></a>Perspectives</h2>
</div>
<div id="references" class="section level2">
<h2 class="hasAnchor">
<a href="#references" class="anchor"></a>References</h2>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="sidebar">

        <div id="tocnav">
      <h2 class="hasAnchor">
<a href="#tocnav" class="anchor"></a>Contents</h2>
      <ul class="nav nav-pills nav-stacked">
<li><a href="#why">Why</a></li>
      <li><a href="#installation">Installation</a></li>
      <li><a href="#getting-started">Getting started</a></li>
      <li><a href="#sample-workflow">Sample Workflow</a></li>
      <li><a href="#perspectives">Perspectives</a></li>
      <li><a href="#references">References</a></li>
      </ul>
</div>
      </div>

</div>



      <footer><div class="copyright">
  <p>Developed by Andreas Blaette.</p>
</div>

<div class="pkgdown">
  <p>Site built with <a href="https://pkgdown.r-lib.org/">pkgdown</a> 1.4.1.</p>
</div>

      </footer>
</div>

  


  </body>
</html>
